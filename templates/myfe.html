<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> old</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css" />
</head>

    

<body>
    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    What poll you wanna post?
                </h1>
            </div>
            
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-offset-4 is-4">
                    <form method="POST">
                        <div class="field has-addons">
                            <div class="control is-expanded">
                                <input class="input" name="pollquestion" id="q" type="text" placeholder="City Name">
                            </div>
                            
                            <div class="control">
                                <button class="button is-info" >
                                    question
                                </button>
                            </div>
                        </div>

                        <div class="field has-addons">
                          <div class="control is-expanded">
                              <input class="input" name="option1" id="op1" type="text" placeholder="City Name">
                          </div>
                          
                          <div class="control">
                             
                          </div>
                      </div>

                      <div class="field has-addons">
                        <div class="control is-expanded">
                            <input class="input" name="option2" id="op2" type="text" placeholder="City Name">
                        </div>
                        
                        <div class="control">
                           
                        </div>
                    </div>
                    

                    </form>
                </div>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-offset-4 is-4">
                    {% for weather in weather_data %}
                    <div class="box">
                        <article class="media">
                            
                            <div class="media-content">
                                    <div class="content">
                                            <p>
                                                <form >
                                                <span class="title" id="ques">{{ weather.poll }}</span>
                                                <br>
                                                
                                                    <button class="button is-info" method="GET" onClick="fun1()" id="oop1">
                                                       {{ weather.op1 }} 
                                                    </button>
                                                <br>
                                                <br>
                                                    <button class="button is-info" method="GET" onClick="fun2()" id="oop2">
                                                        {{ weather.op2 }}
                                                    </button>
                                                </form>   
                                            </p>
                                    </div> 
                            </div>
                        </article>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    <footer class="footer">
    </footer>
  <script>
      var str1;
      var qu=document.getElementById("ques").value;
      console.log(qu);
    function fun1(){
        str1=document.getElementById("oop1").value;
        console.log(str1);
        var xhttp = new XMLHttpRequest();
  /* xhttp.onreadystatechange = function() {
    
       var o= xhttp.responseText;
       console.log(o);
    
    };
    xhttp.open('GET', 'http://127.0.0.1:5000/enter/'+qu+'/'+str1);
    xhttp.send(); */
    }
    function fun2(){
        str1=document.getElementById("oop2").value;
        console.log(str1);
        var xhttp = new XMLHttpRequest();
   /* xhttp.onreadystatechange = function() {
    
       var o= xhttp.responseText;
       console.log(o);
    
    };
    xhttp.open('GET', 'http://127.0.0.1:5000/enter/'+qu+'/'+str1);
    xhttp.send(); */
    }
    /*
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
    
       var o= xhttp.responseText;
       console.log(o);
    
    };
    xhttp.open('GET', 'http://127.0.0.1:5000/enter/'+qu+'/'+str1);
    xhttp.send();

    /*  


        var question;
        var optionO;
        var optionTwo;
        var optionThree;
        question = document.getElementById("q").value;
        optionO = document.getElementById("op1").value;
        optionTwo = document.getElementById("op2").value;
        optionThree = document.getElementById("op3").value;
        
        var obj = {
            pollquestison: question,
            option1: optionO,
            option2: optionTwo,
            option3: optionThree
            
        };

        let xhttp=new XMLHttpRequest();
        xhttp.open("POST","http://127.0.0.1:5000/enter",true);
        xhttp.send(obj);
            
        /*function XHR() {
            axios.post('http://127.0.0.1:5000/enter', {
             name:"dfghjkl" 
             
             
            })
            .then((response) => {

            })
        }*/
    
            
            </script>
</body>
</html>